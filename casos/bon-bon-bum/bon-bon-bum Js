document.addEventListener("DOMContentLoaded", () => {
  const content = document.getElementById("case-content");
  const tabs = Array.from(document.querySelectorAll(".ux-tab[data-page]"));

  if (!content || !tabs.length) return;

  async function loadPage(page){
    try{
      const res = await fetch(page, { cache: "no-store" });
      if(!res.ok) throw new Error("HTTP " + res.status);
      content.innerHTML = await res.text();
    }catch(e){
      content.innerHTML = `<p style="text-align:center;">No se pudo cargar esta secci√≥n.</p>`;
      console.error(e);
    }
  }

  function setActive(btn){
    tabs.forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
  }

  tabs.forEach(btn => {
    btn.addEventListener("click", () => {
      setActive(btn);
      loadPage(btn.dataset.page);
    });
  });

  // carga inicial
  setActive(tabs[0]);
  loadPage(tabs[0].dataset.page);
});
